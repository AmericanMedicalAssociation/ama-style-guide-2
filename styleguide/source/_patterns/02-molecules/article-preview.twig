{% set link = topic_article_preview.title %}
{% set image_json = topic_article_preview.small ? topic_article_preview.small.image : topic_article_preview.image %}
{% set paragraph = topic_article_preview.paragraph %}
{% set class = topic_article_preview.class %}

{#Topic videos#}
{% macro topic_video(topic_article_video) %}
  {% set video = topic_article_video %}
  {% if video %}
    {% include "@atoms/media/video.twig" %}
  {% endif %}
{% endmacro %}

{#Topic images#}
{% macro topic_image(topic_article_image) %}
  {% set image = topic_article_image %}
  {% if image %}
    <div class="ama__topic_article-preview-container col-xs-6">
      {% include "@atoms/media/image.twig" %}
    </div>
  {% endif %}
{% endmacro %}

{#Topic related #}
{% macro topic_description(topic_article_preview) %}
  {% set link = topic_article_preview.link %}
  {% set paragraph = topic_article_preview.paragraph %}

  {% if paragraph %}
    <div class="ama__topic_article-preview_description col-xs-6">
      {% include "@atoms/paragraph.twig" %}
    </div>
    <div class="ama__metadata topic_article-preview_metadata col-xs-12">
      {% include "@molecules/article-metadata.twig" %}
    </div>
  {% endif %}
{% endmacro %}

{#Show only title#}
{% macro topic_title(topic_article_title) %}
  {% set link = topic_article_title %}
  {% if link  %}
   <h2 class="ama__topic_article-preview_container-title col-xs-12">
      {% include "@atoms/link.twig" %}
    </h2>
  {% endif %}
{% endmacro %}

<div class="ama__topic_article-preview {{ class }}">
  {{ _self.topic_image(topic_article_preview.image) }}
  {{ _self.topic_video(topic_article_preview.video) }}
  {{ _self.topic_title(topic_article_preview.link) }}
  {{ _self.topic_description(topic_article_preview) }}
</div>