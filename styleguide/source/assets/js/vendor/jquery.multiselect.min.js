!function(e,t){var i=0,s={open:{class:"ui-multiselect-open",icon:'<span class="ui-icon ui-icon-triangle-1-s"></span',title:"Open"},close:{class:"ui-multiselect-close",icon:'<span class="ui-icon ui-icon-circle-close"></span>',title:"Close"},checkAll:{class:"ui-multiselect-all",icon:'<span class="ui-icon ui-icon-check"></span>',text:"Check all",title:"Check all"},uncheckAll:{class:"ui-multiselect-none",icon:'<span class="ui-icon ui-icon-closethick"></span>',text:"Uncheck all",title:"Uncheck all"},flipAll:{class:"ui-multiselect-flip",icon:'<span class="ui-icon ui-icon-arrowrefresh-1-w"></span>',text:"Flip all",title:"Flip all"},collapse:{icon:'<span class="ui-icon ui-icon-triangle-1-s"></span>',title:"Collapse"},expand:{icon:'<span class="ui-icon ui-icon-triangle-1-e"></span>',title:"Expand"},collapseAll:{class:"ui-multiselect-collapseall",icon:'<span class="ui-icon ui-icon-triangle-1-s"></span>',text:"Collapse all",title:"Collapse all"},expandAll:{class:"ui-multiselect-expandall",icon:'<span class="ui-icon ui-icon-triangle-1-e"></span>',text:"Expand all",title:"Expand all"}};e.widget("ech.multiselect",{options:{buttonWidth:225,menuWidth:null,menuHeight:200,resizableMenu:!1,appendTo:null,position:{},zIndex:null,classes:"",header:["checkAll","uncheckAll"],linkInfo:null,noneSelectedText:"Select options",selectedText:"# of # selected",selectedList:0,selectedListSeparator:", ",maxSelected:null,openEffect:null,closeEffect:null,autoOpen:!1,htmlText:[],wrapText:["button","header","options"],listbox:!1,addInputNames:!0,disableInputsOnToggle:!0,groupsSelectable:!0,groupsCollapsable:!1,groupColumns:!1},_getAppendEl:function(){var t=this.options.appendTo;return t&&(t=t.jquery?t:t.nodeType?e(t):this.document.find(t).eq(0)),t&&t[0]||(t=this.element.closest(".ui-front, dialog")),t.length||(t=e(document.body)),t},_create:function(){var t=this.element,l=t[0],n=this.options,a=n.classes;this.linkInfo=e.extend(!0,{},s,n.linkInfo||{});this._selectWidth=this._getBCRWidth(l),t.hide(),n.htmlText=n.htmlText||[];var o=n.wrapText=n.wrapText||[];if(this.speed=e.fx.speeds._default,this._isOpen=!1,this._namespaceID=this.eventNamespace,this.multiselectID=i++,!n.listbox){var c=(this.$button=e(document.createElement("button"))).addClass("ui-multiselect ui-widget ui-state-default ui-corner-all"+(o.indexOf("button")>-1?"":" ui-multiselect-nowrap")+(a?" "+a:"")).attr({type:"button",title:l.title,tabIndex:l.tabIndex,id:l.id?l.id+"_ms":null}).prop("aria-haspopup",!0).html(this._linkHTML('<span class="{{class}}" title="{{title}}">{{icon}}</span>',"open"));this.$buttonlabel=e(document.createElement("span")).html(n.noneSelectedText||t[0].placeholder).appendTo(c)}var u="";if(n.header){if("string"==typeof n.header)u="<li>"+n.header+"</li>";else if(n.header.constructor==Array)for(var r=0,h=n.header.length;r<h;r++){var d=n.header[r];d&&d in this.linkInfo&&(!n.maxSelected||"checkAll"!==d)&&-1===["open","close","collapse","expand"].indexOf(d)&&(u+=this._linkHTML('<li><a class="{{class}}" title="{{title}}">{{icon}}<span>{{text}}</span></a></li>',d))}}else;this.$headerLinkContainer=e(document.createElement("ul")).addClass("ui-helper-reset").html(u+(n.listbox?"":this._linkHTML('<li class="{{class}}"><a class="{{class}}" title="{{title}}">{{icon}}</a></li>',"close")));var p=(this.$header=e(document.createElement("div"))).addClass("ui-multiselect-header ui-widget-header ui-corner-all ui-helper-clearfix").append(this.$headerLinkContainer),m=(this.$checkboxes=e(document.createElement("ul"))).addClass("ui-multiselect-checkboxes ui-helper-reset"+(o.indexOf("options")>-1?"":" ui-multiselect-nowrap")),f=(this.$menu=e(document.createElement("div"))).addClass("ui-multiselect-menu ui-widget ui-widget-content ui-corner-all"+(l.multiple?"":" ui-multiselect-single")+(n.listbox?" ui-multiselect-listbox":"")+(a?" "+a:"")).append(p,m);if(n.listbox)f.insertAfter(t);else{c.insertAfter(t);var g=this._getAppendEl();if(g.append(f),!n.zIndex&&!g.hasClass("ui-front")){var b=this.element.closest(".ui-front, dialog");n.zIndex=Math.max(b&&parseInt(b.css("z-index"),10)+1||0,g&&parseInt(g.css("z-index"),10)+1||0)}n.zIndex&&f.css("z-index",n.zIndex),n.position=e.extend({my:"left top",at:"left bottom",of:c},n.position||{})}this._bindEvents(),this.refresh(!0)},_linkHTML:function(e,t){var i=this;return e.replace(/{{(.*?)}}/gi,function(e,s){return i.linkInfo[t][s]}).replace("<span></span>","")},_init:function(){var e=this.element[0];!1!==this.options.header?this.$headerLinkContainer.find(".ui-multiselect-all, .ui-multiselect-none, .ui-multiselect-flip").toggle(!!e.multiple):this.$header.hide(),this.options.autoOpen&&!this.options.listbox&&this.open(),e.disabled&&this.disable()},_makeOption:function(e){var t=this,i=e.title||null,s=t.element.get(0),l=s.id||t.multiselectID,n="ui-multiselect-"+t.multiselectID+"-"+(e.id||l+"-option-"+t.inputIdCounter++),a=s.multiple,o=e.disabled,c=e.selected,u=document.createElement("input"),r={type:a?"checkbox":"radio",id:n,title:i,value:e.value,name:t.options.addInputNames?"multiselect_"+l:null,checked:c?"checked":null,"aria-selected":c?"true":null,disabled:o?"disabled":null,"aria-disabled":o?"true":null};for(var h in r)null!==r[h]&&u.setAttribute(h,r[h]);for(var d=e.attributes,p=d.length,m=0;m<p;m++){var f=d[m];/^data\-.+/.test(f.name)&&u.setAttribute(f.name,f.value)}var g=document.createElement("span");t.options.htmlText.indexOf("options")>-1?g.innerHTML=e.innerHTML:g.textContent=e.textContent;var b=e.getAttribute("data-image-src");if(b){var v=document.createElement("img");v.setAttribute("src",b),g.insertBefore(v,g.firstChild)}var x=document.createElement("label");x.setAttribute("for",n),null!==i&&x.setAttribute("title",i),x.className+=(o?" ui-state-disabled":"")+(c&&!a?" ui-state-active":"")+" ui-corner-all",x.appendChild(u),x.appendChild(g);var _=document.createElement("li");return _.className=(o?"ui-multiselect-disabled ":"")+(e.className||""),_.appendChild(x),_},_buildOptionList:function(){var t=this,i=[];this.inputIdCounter=0,this.element.children().each(function(){var s=this;if("OPTGROUP"===s.tagName.toUpperCase()){var l=[];e(s).children().each(function(){l.push(t._makeOption(this))});var n=t.options.groupsCollapsable?e(document.createElement("button")).attr({title:t.linkInfo.collapse.title}).addClass("ui-state-default ui-corner-all ui-multiselect-collapser").html(t.linkInfo.collapse.icon):null,a=e(document.createElement("a")).addClass("ui-multiselect-grouplabel").html(s.getAttribute("label")),o=e(document.createElement("ul")).append(l),c=e(document.createElement("li")).addClass("ui-multiselect-optgroup"+(t.options.groupColumns?" ui-multiselect-columns":"")+(s.className?" "+s.className:"")).append(n,a,o);i.push(c)}else i.push(t._makeOption(s))}),this.$checkboxes.empty().append(i)},refresh:function(e){var t=this.element;!1!==this.options.header&&this.$headerLinkContainer.find(".ui-multiselect-all, .ui-multiselect-none, .ui-multiselect-flip").toggle(!!t[0].multiple),this._buildOptionList(),this._updateCache(),this.options.listbox?(this._isOpen||(this.$menu.show(),this._isOpen=!0),this._setMenuWidth(),this._setMenuHeight()):(this._setButtonWidth(),this.update(!0)),e||this._trigger("refresh")},_updateCache:function(){this._savedButtonWidth=0,this._savedMenuWidth=0,this._savedMenuHeight=0,this.$header=this.$menu.children(".ui-multiselect-header"),this.$checkboxes=this.$menu.children(".ui-multiselect-checkboxes"),this.$labels=this.$menu.find("label"),this.$inputs=this.$labels.children("input"),this.element.is(':data("ech-multiselectfilter")')&&this.element.multiselectfilter("instance").updateCache(!0)},resync:function(e){var t=this.$inputs,i=this.element.find("option");if(t.length===i.length){var s={};t.not(e?":disabled":"").each(function(){s[this.value]=this}),i.not(e?":disabled":"").each(function(){this.value in s&&(s[this.value].checked=this.selected)}),this._trigger("resync"),this.update()}else this.refresh()},update:function(t){if(!this.options.listbox){var i,s=this,l=s.options,n=l.selectedList,a=l.selectedText,o=s.$inputs,c=o.length,u=o.filter(":checked"),r=u.length;i=r?"function"==typeof a?a.call(s,r,c,u.get()):/\d/.test(n)&&n>0&&r<=n?u.map(function(){return e(this).next().text()}).get().join(l.selectedListSeparator):a.replace("#",r).replace("#",c):l.noneSelectedText,s._setButtonValue(i,t),-1===l.wrapText.indexOf("button")&&this._setButtonWidth(!0),s._isOpen&&s._savedButtonHeight!=s.$button.outerHeight(!1)&&s.position()}},_setButtonValue:function(e,t){this.$buttonlabel[this.options.htmlText.indexOf("button")>-1?"html":"text"](e),t&&(this.$button[0].defaultValue=e)},_bindButtonEvents:function(){var t=this;function i(){return t[t._isOpen?"close":"open"](),!1}this.$button.on({click:i,keydown:e.proxy(t._handleButtonKeyboardNav,t),mouseenter:function(){this.classList.contains("ui-state-disabled")||this.classList.add("ui-state-hover")},mouseleave:function(){this.classList.remove("ui-state-hover")},focus:function(){this.classList.contains("ui-state-disabled")||this.classList.add("ui-state-focus")},blur:function(){this.classList.remove("ui-state-focus")}}).find("span").on("click.multiselect,click",i)},_handleButtonKeyboardNav:function(e){var t=this;if(t._isOpen||t.element[0].multiple||38!==e.which&&40!==e.which)switch(e.which){case 27:case 37:case 38:t.close();break;case 40:case 39:t.open()}else{var i=t.$inputs,s=i.index(i.filter(":checked"));38===e.which&&s?i.eq(s-1).trigger("click"):40===e.which&&s<i.length-1&&i.eq(s+1).trigger("click")}},_bindCheckboxEvents:function(){var t=this;t.$checkboxes.on("click.multiselect",".ui-multiselect-grouplabel",function(i){if(i.preventDefault(),!t.options.groupsSelectable)return!1;var s=e(this).next("ul").children(":not(.ui-multiselect-excluded)").find("input").not(":disabled"),l=s.get(),n=this.textContent;if(!1!==t._trigger("beforeoptgrouptoggle",i,{inputs:l,label:n})){var a=t.options.maxSelected;a&&t.$inputs.filter(":checked").length+s.length>a||(t._toggleChecked(s.filter(":checked").length!==s.length,s),t._trigger("optgrouptoggle",i,{inputs:l,label:n,checked:l.length?l[0].checked:null}))}}).on("click.multiselect",".ui-multiselect-collapser",function(i){var s=e(this),l=s.parent(),n=l.find(".ui-multiselect-grouplabel").first().html(),a=t.linkInfo,o="ui-multiselect-collapsed",c=l.hasClass(o);!1!==t._trigger("beforecollapsetoggle",i,{label:n,collapsed:c})&&(l.toggleClass(o),s.attr("title",c?a.collapse.title:a.expand.title).html(c?a.collapse.icon:a.expand.icon),t.options.listbox||t._setMenuHeight(!0),t._trigger("collapsetoggle",i,{label:n,collapsed:!c}))}).on("mouseenter.multiselect",".ui-multiselect-collapser",function(e){this.classList.add("ui-state-hover")}).on("mouseleave.multiselect",".ui-multiselect-collapser",function(e){this.classList.remove("ui-state-hover")}).on("mouseenter.multiselect","label",function(){this.classList.contains("ui-state-disabled")||(t.$labels.removeClass("ui-state-hover"),e(this).addClass("ui-state-hover").find("input").focus())}).on("keydown.multiselect","label",function(i){if(82!==i.which&&!(i.which>111&&i.which<124))switch(i.preventDefault(),i.which){case 9:i.shiftKey?(t.$menu.find(".ui-state-hover").removeClass("ui-state-hover"),t.$header.find("li").last().find("a").focus()):t.close();break;case 27:t.close();break;case 38:case 40:case 37:case 39:t._traverse(i.which,this);break;case 13:case 32:e(this).find("input")[0].click();break;case 65:i.altKey&&t.checkAll();break;case 70:i.altKey&&t.flipAll();break;case 85:i.altKey&&t.uncheckAll()}}).on("click.multiselect","input",function(i){var s=this,l=e(s),n=s.value,a=s.checked,o=t.element,c=o.find("option"),u=o[0].multiple,r=t.$inputs,h=r.filter(":checked").length,d=t.options,p=d.htmlText.indexOf("options")>-1?"html":"text",m=l.parent().find("span")[p](),f=d.maxSelected;if(s.disabled||!1===t._trigger("click",i,{value:n,text:m,checked:a}))i.preventDefault();else{if(f&&a&&h>f)return!1!==t._trigger("maxselected",i,{labels:t.$labels,inputs:r})&&t.buttonMessage("<center><b>LIMIT OF "+(h-1)+" REACHED!</b></center>"),s.checked=!1,i.preventDefault(),!1;s.focus(),l.prop("aria-selected",a),c.each(function(){this.selected=this.value===n?a:u&&this.selected}),u||(t.$labels.removeClass("ui-state-active"),l.closest("label").toggleClass("ui-state-active",a),t.close()),o.trigger("change"),setTimeout(e.proxy(t.update,t),10)}})},_bindHeaderEvents:function(){var t=this;t.$header.on("click.multiselect","a",function(e){var i={"ui-multiselect-close":"close","ui-multiselect-all":"checkAll","ui-multiselect-none":"uncheckAll","ui-multiselect-flip":"flipAll","ui-multiselect-collapseall":"collapseAll","ui-multiselect-expandall":"expandAll"};for(hdgClass in i)if(this.classList.contains(hdgClass))return t[i[hdgClass]](),e.preventDefault(),!1}).on("keydown.multiselect","a",function(i){switch(i.which){case 27:t.close();break;case 9:var s=e(i.target);(!i.shiftKey||s.parent().prev().length||t.$header.find(".ui-multiselect-filter").length)&&(s.parent().next().length||t.$labels.length||i.shiftKey)||(t.close(),i.preventDefault())}})},_bindEvents:function(){var t=this;t.options.listbox||t._bindButtonEvents(),t._bindHeaderEvents(),t._bindCheckboxEvents(),t.options.resizableMenu&&e.ui&&"resizable"in e.ui&&(t.$menu.show(),t.$menu.resizable({containment:"parent",handles:"s",helper:"ui-multiselect-resize",stop:function(i,s){s.size.width=s.originalSize.width,e(this).outerWidth(s.originalSize.width),!1!==t._trigger("resize",i,s)&&(t.options.menuHeight=s.size.height),t._setMenuHeight(!0)}}),t.$menu.hide()),t.document.on("mousedown"+t._namespaceID+" wheel"+t._namespaceID+" mousewheel"+t._namespaceID,function(i){var s=i.target;!t._isOpen||t.$button&&(s===t.$button[0]||e.contains(t.$button[0],s))||s===t.$menu[0]||e.contains(t.$menu[0],s)||t.close()}),e(t.element[0].form).on("reset"+t._namespaceID,function(){setTimeout(e.proxy(t.refresh,t),10)})},_parse2px:function(t,i,s){if("string"!=typeof t)return{px:t,minimax:0};var l=t.match(/([<>])?=?\s*([.\d]+)\s*([eimnptx%]*)s?/i),n=l[1],a=parseFloat(l[2]),o=l[3].toLowerCase(),c=-1;switch(o){case"pt":case"in":case"cm":case"mm":c={pt:4/3,in:96,cm:96/2.54,mm:96/25.4}[o]*a;break;case"em":var u=(window.getComputedStyle?getComputedStyle(document.body).fontSize:document.body.currentStyle.fontSize)||"16px";c=parseFloat(u)*a;break;case"%":i&&("string"!=typeof i&&i.jquery||(i=e(i)),c=(s?i.parent().height():i.parent().width())*(a/100));break;default:c=a}return{px:c,minimax:">"==n?-1:"<"==n?1:0}},_setButtonWidth:function(e){if(!this._savedButtonWidth||e){var t=this._selectWidth||this._getBCRWidth(this.element),i=this.options.buttonWidth||"";if(/\d/.test(i)){var s=this._parse2px(i,this.element),l=s.px,n=s.minimax;t=n<0?Math.max(t,l):n>0?Math.min(t,l):l}else i=i.toLowerCase();"auto"!==i&&this.$button.outerWidth(t),this._savedButtonWidth=t}},_setMenuWidth:function(e){if(!this._savedMenuWidth||e){var t=this.options.listbox?this._selectWidth:this._savedButtonWidth||this._getBCRWidth(this.$button),i=this.options.menuWidth||"";if(/\d/.test(i)){var s=this._parse2px(i,this.element),l=s.px,n=s.minimax;t=n<0?Math.max(t,l):n>0?Math.min(t,l):l}else i=i.toLowerCase();if("auto"!==i)return this.$menu.outerWidth(t),void(this._savedMenuWidth=t);this.$menu.addClass("ui-multiselect-measure");var a=this.$header.outerWidth(!0)+this._jqWidthFix(this.$header),o=this.$checkboxes.outerWidth(!0)+this._jqWidthFix(this.$checkboxes);this.$menu.removeClass("ui-multiselect-measure");var c=Math.max(this.options.wrapText.indexOf("header")>-1?0:a,o);this.$menu.width(c),this._savedMenuWidth=this.$menu.outerWidth(!1)}},_setMenuHeight:function(t){var i=this;if(!i._savedMenuHeight||t){var s=e(window).height(),l=i.options.menuHeight||"",n=!1,a=4;if(/\d/.test(l)){var o=i.$header.filter(":visible"),c=o.outerHeight(!0)+i._jqHeightFix(o),u=this.$menu.outerHeight(!1)-this.$menu.height();l=i._parse2px(l,i.element,!0).px,s=Math.min(l,s)-c-u}else"size"===l.toLowerCase()&&(n=!0,a=i.element[0].size||a);var r="hidden",h=0,d=4;i.$checkboxes.find("li:not(.ui-multiselect-optgroup),a").filter(":visible").each(function(){if(d+=e(this).outerHeight(!0)+i._jqHeightFix(this),n&&++h>=a||d>s)return r="auto",n||(d=s),!1}),i.$checkboxes.css("overflow",r).height(d),i._savedMenuHeight=this.$menu.outerHeight(!1)}},_getBCRWidth:function(e){if(!e||e.jquery&&!e[0])return null;var t=e.jquery?e[0].getBoundingClientRect():e.getBoundingClientRect();return t.right-t.left},_getBCRHeight:function(e){if(!e||e.jquery&&!e[0])return null;var t=e.jquery?e[0].getBoundingClientRect():e.getBoundingClientRect();return t.bottom-t.top},_jqWidthFix:function(t){return!t||t.jquery&&!t[0]?null:t.jquery?this._getBCRWidth(t[0])-t.outerWidth(!1):this._getBCRWidth(t)-e(t).outerWidth(!1)},_jqHeightFix:function(t){return!t||t.jquery&&!t[0]?null:t.jquery?this._getBCRHeight(t[0])-t.outerHeight(!1):this._getBCRHeight(t)-e(t).outerHeight(!1)},_traverse:function(t,i){var s=e(i),l=38===t||37===t,n=s.parent()[l?"prevAll":"nextAll"]("li:not(:disabled, .ui-multiselect-optgroup):visible").first();if(n.length||(n=s.parents(".ui-multiselect-optgroup")[l?"prev":"next"]()),n.length)n.find("label").filter(":visible")[l?"last":"first"]().trigger("mouseover");else{var a=this.$menu.find("ul").last();this.$menu.find("label").filter(":visible")[l?"last":"first"]().trigger("mouseover"),a.scrollTop(l?a.height():0)}},_toggleState:function(e,t){return function(){var i="!"===t?!this[e]:t;this.disabled||(this[e]=i),i?this.setAttribute("aria-"+e,!0):this.removeAttribute("aria-"+e)}},_toggleChecked:function(e,t,i){var s=this,l=s.element,n=t&&t.length?t:s.$inputs;i&&(n=s._isOpen?n.closest("li").not(".ui-multiselect-excluded").find("input").not(":disabled"):n.not(":disabled")),n.each(s._toggleState("checked",e)),n.eq(0).focus(),s.update();var a={};n.each(function(){a[this.value]=!0}),l.find("option").each(function(){!this.disabled&&a[this.value]&&s._toggleState("selected",e).call(this)}),n.length&&l.trigger("change")},_toggleDisabled:function(e,t){var i="ui-state-disabled";if(this.$button.prop({disabled:e,"aria-disabled":e})[e?"addClass":"removeClass"](i),this.options.disableInputsOnToggle){var s=void 0===t?this.$inputs:this._multiselectOptgroupFilter(t).find("input"),l="ui-multiselect-disabled";if(e)for(var n=0,a=(o=s.filter(":enabled").get()).length;n<a;n++)o[n].setAttribute("disabled","disabled"),o[n].setAttribute("aria-disabled","disabled"),o[n].classList.add(l),o[n].parentNode.classList.add(i);else{var o;for(n=0,a=(o=s.filter("."+l+":disabled").get()).length;n<a;n++)o[n].removeAttribute("disabled"),o[n].removeAttribute("aria-disabled"),o[n].classList.remove(l),o[n].parentNode.classList.remove(i)}}(void 0===t?this.element:this._nativeOptgroupFilter(t).find("option")).prop({disabled:e,"aria-disabled":e})},open:function(){var t=this.$button;if(!(!1===this._trigger("beforeopen")||t.hasClass("ui-state-disabled")||this._isOpen||this.options.listbox)){var i=this.$menu,s=this.$header,l=this.$labels,n=this.$inputs.filter(":checked:not(.ui-state-disabled)"),a=this.speed,o=this.options.openEffect;o&&o.constructor==Array&&(a=o[1]||a,o=o[0]),this.$checkboxes.scrollTop(0),o?e.fn.show.apply(i,o?[o,a]:[]):i.css("display","block"),this._setMenuWidth(),this._setMenuHeight(),this.position();var c=s.find(".ui-multiselect-filter");c.length?c.first().find("input").trigger("focus"):n.length?n.eq(0).trigger("focus").parent("label").eq(0).trigger("mouseover").trigger("mouseenter"):l.length?l.filter(":not(.ui-state-disabled)").eq(0).trigger("mouseover").trigger("mouseenter").find("input").trigger("focus"):s.find("a").first().trigger("focus"),t.addClass("ui-state-active"),this._isOpen=!0,this._trigger("open")}},close:function(){if(!1!==this._trigger("beforeclose")&&!this.options.listbox){var t=this.options.closeEffect,i=this.speed,s=this.$button;t&&t.constructor==Array&&(i=t[1]||i,t=t[0]),t?e.fn.hide.apply(this.$menu,t?[t,i]:[]):this.$menu.css("display","none"),s.removeClass("ui-state-active").trigger("blur").trigger("mouseleave"),this._isOpen=!1,this._trigger("close"),s.trigger("focus")}},position:function(){var t=this.$button;if(this._savedButtonHeight=t.outerHeight(!1),e.ui&&e.ui.position)this.$menu.position(this.options.position);else{var i=t.position();i.top+=this._savedButtonHeight,this.$menu.offset(i)}},enable:function(e){this._toggleDisabled(!1,e)},disable:function(e){this._toggleDisabled(!0,e)},checkAll:function(e){this._trigger("beforeCheckAll"),this.options.maxSelected||(void 0===e?this._toggleChecked(!0):this._toggleChecked(!0,this._multiselectOptgroupFilter(e).find("input")),this._trigger("checkAll"))},uncheckAll:function(e){this._trigger("beforeUncheckAll"),void 0===e?this._toggleChecked(!1):this._toggleChecked(!1,this._multiselectOptgroupFilter(e).find("input")),this.element[0].multiple||this.$inputs.filter(":checked").length||(this.element[0].selectedIndex=-1),this._trigger("uncheckAll")},flipAll:function(e){this._trigger("beforeFlipAll");var t=void 0!==e,i=this.options.maxSelected,s=this.$inputs.length,l=this.$inputs.filter(":checked").length,n=t?this._multiselectOptgroupFilter(e).find("input"):null,a=t?n.length:0,o=t?n.filter(":checked").length:0;!i||i>=(t?l-o+a-o:s-l)?(t?this._toggleChecked("!",n):this._toggleChecked("!"),this._trigger("flipAll")):this.buttonMessage("<center><b>Flip All Not Permitted.</b></center>")},collapseAll:function(e){this._trigger("beforeCollapseAll"),(void 0===e?this.$checkboxes.find(".ui-multiselect-optgroup"):this._multiselectOptgroupFilter(e)).addClass("ui-multiselect-collapsed").children(".ui-multiselect-collapser").attr("title",this.linkInfo.expand.title).html(this.linkInfo.expand.icon),this._trigger("collapseAll")},expandAll:function(e){this._trigger("beforeExpandAll"),(void 0===e?this.$checkboxes.find(".ui-multiselect-optgroup"):this._multiselectOptgroupFilter(e)).removeClass("ui-multiselect-collapsed").children(".ui-multiselect-collapser").attr("title",this.linkInfo.collapse.title).html(this.linkInfo.collapse.icon),this._trigger("expandAll")},buttonMessage:function(e){var t=this;t.$buttonlabel.html(e),setTimeout(function(){t.update()},1e3)},getChecked:function(){return this.$menu.find("input:checked")},getUnchecked:function(){return this.$menu.find("input:not(:checked)")},destroy:function(){return e.Widget.prototype.destroy.call(this),this.document.off(this._namespaceID),e(this.element[0].form).off(this._namespaceID),this.options.listbox||this.$button.remove(),this.$menu.remove(),this.element.show(),this},isOpen:function(){return this._isOpen},widget:function(){return this.$menu},getNamespaceID:function(){return this._namespaceID},getButton:function(){return this.$button},getMenu:function(){return this.$menu},getLabels:function(){return this.$labels},getCollapsed:function(){return this.$checkboxes.find(".ui-multiselect-optgroup")},value:function(e){return void 0!==e?(this.element.val(e),this.resync(),this.element):this.element.val()},addOption:function(t,i,s){var l=this,n=l.options.htmlText.indexOf("options")>-1?"html":"text",a=e(document.createElement("option")).attr(t)[n](i),o=a.get(0);void 0===s?(l.element.append(a),l.$checkboxes.append(l._makeOption(o))):(l._nativeOptgroupFilter(s).append(a),l._multiselectOptgroupFilter(s).append(l._makeOption(o))),l._updateCache()},_nativeOptgroupFilter:function(e){return this.element.children("OPTGROUP").filter(function(t){return"number"==typeof e?t===e:this.getAttribute("label")===e})},_multiselectOptgroupFilter:function(e){return this.$menu.find(".ui-multiselect-optgroup").filter(function(t){return"number"==typeof e?t===e:this.getElementsByClassName("ui-multiselect-grouplabel")[0].textContent===e})},removeOption:function(e){e&&(this.element.find("option[value="+e+"]").remove(),this.$labels.find("input[value="+e+"]").parents("li").remove(),this._updateCache())},_setOption:function(t,i){var s=this.$header,l=this.$menu;switch(t){case"header":"boolean"==typeof i?s.toggle(i):"string"==typeof i&&(this.$headerLinkContainer.children("li:not(:last-child)").remove(),this.$headerLinkContainer.prepend("<li>"+i+"</li>"));break;case"checkAllText":case"uncheckAllText":case"flipAllText":case"collapseAllText":case"expandAllText":"checkAllText"===t&&this.options.maxSelected||s.find("a."+this.linkInfo[t.replace("Text","")].class+" span").eq(-1).html(i);break;case"checkAllIcon":case"uncheckAllIcon":case"flipAllIcon":case"collapseAllIcon":case"expandAllIcon":"checkAllIcon"===t&&this.options.maxSelected||s.find("a."+this.linkInfo[t.replace("Icon","")].class+" span").eq(0).replaceWith(i);break;case"openIcon":l.find("span.ui-multiselect-open").html(i);break;case"closeIcon":l.find("a.ui-multiselect-close").html(i);break;case"buttonWidth":case"menuWidth":this.options[t]=i,this._setButtonWidth(!0),this._setMenuWidth(!0);break;case"menuHeight":this.options[t]=i,this._setMenuHeight(!0);break;case"selectedText":case"selectedList":case"maxSelected":case"noneSelectedText":case"selectedListSeparator":this.options[t]=i,this.update(!0);break;case"classes":l.add(this.$button).removeClass(this.options.classes).addClass(i);break;case"multiple":var n=this.element;!!n[0].multiple!==i&&(l.toggleClass("ui-multiselect-multiple",i).toggleClass("ui-multiselect-single",!i),n[0].multiple=i,this.uncheckAll(),this.refresh());break;case"position":null===i||e.isEmptyObject(i)||(this.options.position=i),this.position();break;case"zIndex":this.options.zIndex=i,this.$menu.css("z-index",i);break;default:this.options[t]=i}e.Widget.prototype._setOption.apply(this,arguments)}}),e.ui&&"dialog"in e.ui&&e.widget("ui.dialog",e.ui.dialog,{_allowInteraction:function(t){if(this._super(t)||e(t.target).closest(".ui-multiselect-menu").length)return!0}})}(jQuery);